# üöÄ –î–µ–ø–ª–æ–π PizzaNat Web –Ω–∞ Timeweb Cloud Apps

–ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è PizzaNat –Ω–∞ —Å–µ—Ä–≤–∏—Å–µ [Timeweb Cloud Apps](https://timeweb.cloud/docs/apps/deploying-with-docker-compose) —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Docker Compose.

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –¥–ª—è Timeweb Cloud Apps](#–±—ã—Å—Ç—Ä—ã–π-—Å—Ç–∞—Ä—Ç-–¥–ª—è-timeweb-cloud-apps)
- [–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è](#—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è)
- [–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞](#–ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞-—Å–µ—Ä–≤–µ—Ä–∞)
- [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞](#–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-–ø—Ä–æ–µ–∫—Ç–∞)
- [–î–µ–ø–ª–æ–π](#–¥–µ–ø–ª–æ–π)
- [–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥](#–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥)
- [–û–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ](#–æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ)
- [–£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫](#—É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ-–Ω–µ–ø–æ–ª–∞–¥–æ–∫)

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –¥–ª—è Timeweb Cloud Apps

### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã:
- ‚úÖ **Volumes –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è** - –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –≤—Å—Ç—Ä–æ–µ–Ω—ã –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
- ‚úÖ **–ü–æ—Ä—Ç—ã 80/443 –∑–∞—Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω—ã** - –∏—Å–ø–æ–ª—å–∑—É–µ–º –ø–æ—Ä—Ç 3000
- ‚úÖ **SSL —É–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** - –Ω–µ –Ω—É–∂–Ω–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã
- ‚úÖ **–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è** - –≤—Å—Ç—Ä–æ–µ–Ω—ã –≤ docker-compose.yml
- ‚úÖ **–ê–≤—Ç–æ–¥–µ–ø–ª–æ–π** - –ø—Ä–∏ –∫–æ–º–º–∏—Ç–∞—Ö –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

### –ü–æ—à–∞–≥–æ–≤—ã–π –¥–µ–ø–ª–æ–π:
1. **–ó–∞–≥—Ä—É–∑–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç** –≤ GitHub/GitLab/BitBucket
2. **–í–æ–π–¥–∏—Ç–µ –≤ –ø–∞–Ω–µ–ª—å** [Timeweb Cloud Apps](https://timeweb.cloud/apps)
3. **–í—ã–±–µ—Ä–∏—Ç–µ "Docker Compose"** –≤ —Ç–∏–ø–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
4. **–ü–æ–¥–∫–ª—é—á–∏—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π** —Å –≤–∞—à–∏–º –ø—Ä–æ–µ–∫—Ç–æ–º
5. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ** –≤ docker-compose.yml (–¥–æ–º–µ–Ω, API, –∞–Ω–∞–ª–∏—Ç–∏–∫–∞)
6. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –¥–µ–ø–ª–æ–π** - –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–±–µ—Ä–µ—Ç –∏ –∑–∞–ø—É—Å—Ç–∏—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

### –í–∞–∂–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:
```yaml
# –í docker-compose.yml —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ:
ports:
  - "3000:3000"  # –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –ø–æ—Ä—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
environment:
  - VITE_DOMAIN=your-domain.com  # –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à –¥–æ–º–µ–Ω
  - VITE_API_URL=https://api.dimbopizza.ru/api/v1/  # –í–∞—à API
```

### –§–∞–π–ª—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:
- **docker-compose.yml** - –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è –¥–ª—è Timeweb Cloud Apps (–±–µ–∑ volumes)
- **docker-compose.local.yml** - –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è (—Å Traefik, –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–æ–º)
- **env.production** - –®–∞–±–ª–æ–Ω –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è (–¥–ª—è —Å–ø—Ä–∞–≤–∫–∏)

## üîß –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

### –î–ª—è Timeweb Cloud Apps:
- **–ê–∫–∫–∞—É–Ω—Ç**: –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∞–∫–∫–∞—É–Ω—Ç –Ω–∞ [Timeweb Cloud](https://timeweb.cloud/)
- **–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π**: GitHub, GitLab –∏–ª–∏ BitBucket —Å docker-compose.yml –≤ –∫–æ—Ä–Ω–µ
- **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–µ—Ä–≤–µ—Ä–∞**: –í—ã–±–∏—Ä–∞–µ—Ç—Å—è –≤ –ø–∞–Ω–µ–ª–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è Apps
- **SSL**: –£–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–ª–∞—Ç—Ñ–æ—Ä–º–æ–π
- **–î–æ–º–µ–Ω**: –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –¥–æ–º–µ–Ω –∏–ª–∏ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π

### –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Å–µ—Ä–≤–µ—Ä—É Apps:
- **CPU**: 1 vCPU
- **RAM**: 2 GB
- **–î–∏—Å–∫**: 20 GB SSD

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:
- **CPU**: 2 vCPU
- **RAM**: 4 GB
- **–î–∏—Å–∫**: 40 GB SSD

## üñ•Ô∏è –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞

### 1. –°–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–∞ –Ω–∞ Timeweb Cloud

1. –í–æ–π–¥–∏—Ç–µ –≤ [–ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è Timeweb Cloud](https://timeweb.cloud/)
2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π VDS/VPS —Å–µ—Ä–≤–µ—Ä:
   - **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**: –í—ã–±–µ—Ä–∏—Ç–µ –ø–æ–¥—Ö–æ–¥—è—â—É—é –ø–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º
   - **–û–°**: Ubuntu 22.04 LTS
   - **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ**: –í–∫–ª—é—á–∏—Ç–µ —Ä–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ

### 2. –ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞

```bash
# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É
ssh root@your-server-ip

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã
apt update && apt upgrade -y

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –ø–∞–∫–µ—Ç–æ–≤
apt install -y curl wget git unzip software-properties-common apt-transport-https ca-certificates gnupg lsb-release

# –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
useradd -m -s /bin/bash pizzanat
usermod -aG sudo pizzanat

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ SSH –∫–ª—é—á–µ–π (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
mkdir -p /home/pizzanat/.ssh
cp ~/.ssh/authorized_keys /home/pizzanat/.ssh/
chown -R pizzanat:pizzanat /home/pizzanat/.ssh
chmod 700 /home/pizzanat/.ssh
chmod 600 /home/pizzanat/.ssh/authorized_keys
```

### 3. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Docker –∏ Docker Compose

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Docker
curl -fsSL https://download.docker.com/linux/ubuntu/gpg | gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg
echo "deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable" | tee /etc/apt/sources.list.d/docker.list > /dev/null

apt update
apt install -y docker-ce docker-ce-cli containerd.io docker-compose-plugin

# –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –≥—Ä—É–ø–ø—É docker
usermod -aG docker pizzanat

# –ó–∞–ø—É—Å–∫ –∏ –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫ Docker
systemctl start docker
systemctl enable docker

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Docker Compose (standalone)
curl -L "https://github.com/docker/compose/releases/latest/download/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose
chmod +x /usr/local/bin/docker-compose

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏
docker --version
docker-compose --version
```

### 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ñ–∞–π—Ä–≤–æ–ª–∞

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ UFW
apt install -y ufw

# –ë–∞–∑–æ–≤—ã–µ –ø—Ä–∞–≤–∏–ª–∞
ufw default deny incoming
ufw default allow outgoing

# –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ SSH
ufw allow ssh

# –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ HTTP –∏ HTTPS
ufw allow 80/tcp
ufw allow 443/tcp

# –ê–∫—Ç–∏–≤–∞—Ü–∏—è —Ñ–∞–π—Ä–≤–æ–ª–∞
ufw --force enable

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
ufw status
```

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```bash
# –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è pizzanat
su - pizzanat

# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞
git clone https://github.com/your-username/PizzaNatWeb.git
cd PizzaNatWeb

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∞–π–ª–æ–≤
ls -la
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
# –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ production –æ–∫—Ä—É–∂–µ–Ω–∏—è
cp env.production .env

# –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
nano .env
```

**–í–∞–∂–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:**

```env
# API Configuration
VITE_API_URL=https://api.dimbopizza.ru/api/v1/

# Domain Configuration
VITE_DOMAIN=your-domain.com
VITE_WWW_DOMAIN=www.your-domain.com

# Analytics
VITE_YANDEX_METRIKA_ID=your_actual_metrika_id
VITE_GOOGLE_ANALYTICS_ID=your_actual_ga_id

# Payment
VITE_YUKASSA_SHOP_ID=your_actual_yukassa_shop_id

# Contact Info
VITE_PHONE=+7(999)123-45-67
VITE_EMAIL=info@your-domain.com
VITE_ADDRESS=–í–∞—à —Ä–µ–∞–ª—å–Ω—ã–π –∞–¥—Ä–µ—Å
```

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–æ–º–µ–Ω–∞

```bash
# –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ docker-compose.yml –¥–ª—è –≤–∞—à–µ–≥–æ –¥–æ–º–µ–Ω–∞
nano docker-compose.yml

# –ù–∞–π–¥–∏—Ç–µ –∏ –∏–∑–º–µ–Ω–∏—Ç–µ:
# - "traefik.http.routers.pizzanat.rule=Host(`your-domain.com`) || Host(`www.your-domain.com`)"
# - "--certificatesresolvers.letsencrypt.acme.email=admin@your-domain.com"
```

## üöÄ –î–µ–ø–ª–æ–π

### 1. –°–¥–µ–ª–∞–π—Ç–µ —Å–∫—Ä–∏–ø—Ç –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º

```bash
chmod +x deploy-timeweb.sh
```

### 2. –ó–∞–ø—É—Å–∫ –±–∞–∑–æ–≤–æ–≥–æ –¥–µ–ø–ª–æ—è

```bash
# –ë–∞–∑–æ–≤—ã–π –¥–µ–ø–ª–æ–π (—Ç–æ–ª—å–∫–æ –æ—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ)
./deploy-timeweb.sh basic
```

### 3. –î–µ–ø–ª–æ–π —Å SSL

```bash
# –î–µ–ø–ª–æ–π —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º SSL (Let's Encrypt)
./deploy-timeweb.sh ssl
```

### 4. –ü–æ–ª–Ω—ã–π –¥–µ–ø–ª–æ–π —Å–æ –≤—Å–µ–º–∏ —Ñ—É–Ω–∫—Ü–∏—è–º–∏

```bash
# –î–µ–ø–ª–æ–π —Å SSL, –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–æ–º –∏ –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º
./deploy-timeweb.sh full
```

### 5. –î–æ—Å—Ç—É–ø–Ω—ã–µ —Ä–µ–∂–∏–º—ã –¥–µ–ø–ª–æ—è

- `basic` - –¢–æ–ª—å–∫–æ –æ—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
- `ssl` - –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ + SSL —á–µ—Ä–µ–∑ Traefik
- `monitoring` - –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ + –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ Nginx
- `autoupdate` - –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ + –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- `full` - –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –≤–∫–ª—é—á–µ–Ω—ã

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —Å–µ—Ä–≤–∏—Å–æ–≤

```bash
# –°—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
docker-compose ps

# –õ–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
docker-compose logs -f pizzanat-web

# –õ–æ–≥–∏ Traefik (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)
docker-compose logs -f traefik

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤
docker stats
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–∏—Å—Ç–µ–º—ã

```bash
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–∏—Å–∫–∞
df -h

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏
free -h

# –ù–∞–≥—Ä—É–∑–∫–∞ —Å–∏—Å—Ç–µ–º—ã
htop

# –õ–æ–≥–∏ —Å–∏—Å—Ç–µ–º—ã
journalctl -u docker -f
```

### –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã

- **–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ**: `https://your-domain.com`
- **Traefik Dashboard**: `https://your-domain.com:8080` (–µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω)
- **Nginx Metrics**: `http://your-domain.com:9113/metrics` (–µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥)

## üîß –û–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```bash
# –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π
git pull origin main

# –ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞ –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫
./deploy-timeweb.sh basic
```

### –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏
mkdir -p ~/backups/$(date +%Y%m%d)

# –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–∞–∂–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
cp -r ~/PizzaNatWeb ~/backups/$(date +%Y%m%d)/
cp -r ~/PizzaNatWeb/logs ~/backups/$(date +%Y%m%d)/
cp -r ~/PizzaNatWeb/letsencrypt ~/backups/$(date +%Y%m%d)/

# –°–æ–∑–¥–∞–Ω–∏–µ –∞—Ä—Ö–∏–≤–∞
cd ~/backups
tar -czf pizzanat-backup-$(date +%Y%m%d).tar.gz $(date +%Y%m%d)/
```

### –û—á–∏—Å—Ç–∫–∞ —Å–∏—Å—Ç–µ–º—ã

```bash
# –û—á–∏—Å—Ç–∫–∞ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö Docker –æ–±—Ä–∞–∑–æ–≤
docker system prune -a -f

# –û—á–∏—Å—Ç–∫–∞ –ª–æ–≥–æ–≤ (—Å—Ç–∞—Ä—à–µ 7 –¥–Ω–µ–π)
find ~/PizzaNatWeb/logs -name "*.log" -mtime +7 -delete

# –û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö —Ä–µ–∑–µ—Ä–≤–Ω—ã—Ö –∫–æ–ø–∏–π (—Å—Ç–∞—Ä—à–µ 30 –¥–Ω–µ–π)
find ~/backups -name "*.tar.gz" -mtime +30 -delete
```

## üîç –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ü—Ä–æ–±–ª–µ–º—ã —Å –∑–∞–ø—É—Å–∫–æ–º

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤
docker-compose logs pizzanat-web

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
docker-compose config

# –ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞ –±–µ–∑ –∫—ç—à–∞
docker-compose build --no-cache pizzanat-web
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å SSL

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
docker-compose exec traefik ls -la /letsencrypt/

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ Traefik
docker-compose restart traefik

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ Traefik
docker-compose logs traefik
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é

```bash
# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–µ—Å—É—Ä—Å–æ–≤
docker stats

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∏—Å–∫–æ–≤–æ–≥–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞
df -h

# –ê–Ω–∞–ª–∏–∑ –ª–æ–≥–æ–≤ Nginx
docker-compose exec pizzanat-web tail -f /var/log/nginx/access.log
```

### –ß–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏

1. **–ü–æ—Ä—Ç –∑–∞–Ω—è—Ç**: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø–æ—Ä—Ç—ã 80 –∏ 443 —Å–≤–æ–±–æ–¥–Ω—ã
2. **–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø–∞–º—è—Ç–∏**: –£–≤–µ–ª–∏—á—å—Ç–µ —Ä–∞–∑–º–µ—Ä —Å–µ—Ä–≤–µ—Ä–∞
3. **–ü—Ä–æ–±–ª–µ–º—ã —Å DNS**: –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –¥–æ–º–µ–Ω —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –≤–∞—à —Å–µ—Ä–≤–µ—Ä
4. **SSL –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç**: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–æ–º–µ–Ω–∞ –∏ —Ñ–∞–π—Ä–≤–æ–ª–∞

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `docker-compose logs -f`
2. –ò–∑—É—á–∏—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é [Timeweb Cloud](https://timeweb.cloud/docs)
3. –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –≤ —Ç–µ—Ö–ø–æ–¥–¥–µ—Ä–∂–∫—É Timeweb Cloud: 8 (800) 700-32-92

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:

1. **–†–µ–≥—É–ª—è—Ä–Ω–æ –æ–±–Ω–æ–≤–ª—è–π—Ç–µ —Å–∏—Å—Ç–µ–º—É**:
   ```bash
   apt update && apt upgrade -y
   ```

2. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ SSH –∫–ª—é—á–∏** –≤–º–µ—Å—Ç–æ –ø–∞—Ä–æ–ª–µ–π

3. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ä–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏**

4. **–ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –ª–æ–≥–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏**:
   ```bash
   tail -f /var/log/auth.log
   ```

5. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ fail2ban** –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç –±—Ä—É—Ç—Ñ–æ—Ä—Å–∞:
   ```bash
   apt install -y fail2ban
   systemctl enable fail2ban
   ```

## üìà –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è –≤—ã—Å–æ–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏:

1. **–£–≤–µ–ª–∏—á—å—Ç–µ –ª–∏–º–∏—Ç—ã —Ñ–∞–π–ª–æ–≤**:
   ```bash
   echo "* soft nofile 65536" >> /etc/security/limits.conf
   echo "* hard nofile 65536" >> /etc/security/limits.conf
   ```

2. **–û–ø—Ç–∏–º–∏–∑–∏—Ä—É–π—Ç–µ Docker**:
   ```bash
   # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è Docker
   echo '{"log-driver":"json-file","log-opts":{"max-size":"10m","max-file":"3"}}' > /etc/docker/daemon.json
   systemctl restart docker
   ```

3. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ CDN** –¥–ª—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤

4. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ** –≤ nginx.conf

---

**–£—Å–ø–µ—à–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è! üöÄ** 