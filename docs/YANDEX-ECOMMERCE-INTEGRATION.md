# üìä –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–π –∫–æ–º–º–µ—Ä—Ü–∏–∏ –Ø–Ω–¥–µ–∫—Å –ú–µ—Ç—Ä–∏–∫–∞

## üéØ –û–±–∑–æ—Ä —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

–ü—Ä–æ–µ–∫—Ç **PizzaNat Web** —Ç–µ–ø–µ—Ä—å –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω —Å —Å–∏—Å—Ç–µ–º–æ–π —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–π –∫–æ–º–º–µ—Ä—Ü–∏–∏ –Ø–Ω–¥–µ–∫—Å –ú–µ—Ç—Ä–∏–∫–∏ —Å–æ–≥–ª–∞—Å–Ω–æ [–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏](https://yandex.ru/support/metrica/ru/ecommerce/data).

### ‚úÖ –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

1. **üìä –ü–æ–ª–Ω–æ–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç—É Enhanced Ecommerce**
2. **üõí –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –¥–µ–π—Å—Ç–≤–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π**
3. **üí∞ –î–µ—Ç–∞–ª—å–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–æ–∫—É–ø–æ–∫ —Å –¥–æ—Å—Ç–∞–≤–∫–æ–π**
4. **üîß TypeScript —Ç–∏–ø–∏–∑–∞—Ü–∏—è –¥–ª—è –≤—Å–µ—Ö —Å–æ–±—ã—Ç–∏–π**
5. **üß™ –¢–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏**

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

```
src/
‚îú‚îÄ‚îÄ components/analytics/
‚îÇ   ‚îî‚îÄ‚îÄ YandexMetrika.tsx          # –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îî‚îÄ‚îÄ ecommerceHelpers.ts        # –£—Ç–∏–ª–∏—Ç—ã –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ pages/
‚îÇ   ‚îú‚îÄ‚îÄ ProductPage.tsx            # –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ —Ç–æ–≤–∞—Ä–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ CheckoutPage.tsx           # –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø–æ–∫—É–ø–æ–∫
‚îÇ   ‚îî‚îÄ‚îÄ CartPage.tsx               # –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∫–æ—Ä–∑–∏–Ω—ã
‚îú‚îÄ‚îÄ contexts/
‚îÇ   ‚îî‚îÄ‚îÄ ProductsContext.tsx        # –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏–π —Å –∫–æ—Ä–∑–∏–Ω–æ–π
‚îî‚îÄ‚îÄ test-ecommerce.html            # –¢–µ—Å—Ç–æ–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
```

### –ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö

```mermaid
graph TB
    User[–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å] --> Action[–î–µ–π—Å—Ç–≤–∏–µ]
    Action --> Component[React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç]
    Component --> Hook[useYandexMetrika]
    Hook --> DataLayer[window.dataLayer]
    DataLayer --> YM[–Ø–Ω–¥–µ–∫—Å –ú–µ—Ç—Ä–∏–∫–∞]
    YM --> Analytics[–û—Ç—á–µ—Ç—ã]
```

---

## üìã –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è

### 1. üëÅÔ∏è –ü—Ä–æ—Å–º–æ—Ç—Ä —Ç–æ–≤–∞—Ä–∞ (detail)

**–ì–¥–µ:** `ProductPage.tsx`  
**–ö–æ–≥–¥–∞:** –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Ç–æ–≤–∞—Ä–∞

```typescript
// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Ç–æ–≤–∞—Ä–∞
const ecommerceProduct = productToEcommerce(productData, {
  list: getListForTracking(window.location.pathname)
})
trackProductView(ecommerceProduct)
```

**–û—Ç–ø—Ä–∞–≤–ª—è–µ–º—ã–µ –¥–∞–Ω–Ω—ã–µ:**
```javascript
{
  ecommerce: {
    currencyCode: "RUB",
    detail: {
      products: [{
        id: "1",
        name: "–ü–∏—Ü—Ü–∞ –ú–∞—Ä–≥–∞—Ä–∏—Ç–∞",
        price: 450,
        brand: "–î–ò–ú–ë–û –ü–∏—Ü—Ü–∞", 
        category: "–ü–∏—Ü—Ü–∞",
        list: "–ö–∞—Ä—Ç–æ—á–∫–∞ —Ç–æ–≤–∞—Ä–∞",
        position: 1
      }]
    }
  }
}
```

### 2. ‚ûï –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –∫–æ—Ä–∑–∏–Ω—É (add)

**–ì–¥–µ:** `ProductPage.tsx`  
**–ö–æ–≥–¥–∞:** –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –∫–Ω–æ–ø–∫–∏ "–î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É"

```typescript
// –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç—Å—è –ø–µ—Ä–µ–¥ API –≤—ã–∑–æ–≤–æ–º
const ecommerceProduct = productToEcommerce(product, {
  quantity,
  list: getListForTracking(window.location.pathname)
})
trackAddToCart(ecommerceProduct)
```

### 3. ‚ûñ –£–¥–∞–ª–µ–Ω–∏–µ –∏–∑ –∫–æ—Ä–∑–∏–Ω—ã (remove)

**–ì–¥–µ:** `ProductsContext.tsx`  
**–ö–æ–≥–¥–∞:** –ü—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ —Ç–æ–≤–∞—Ä–∞ –∏–∑ –∫–æ—Ä–∑–∏–Ω—ã

```typescript
// –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç—Å—è –¥–æ API –≤—ã–∑–æ–≤–∞
const cartItem = state.cart?.items.find(item => item.productId === productId)
if (cartItem) {
  const ecommerceProduct = cartItemToEcommerce(cartItem, { list: "–ö–æ—Ä–∑–∏–Ω–∞" })
  trackRemoveFromCart(ecommerceProduct)
}
```

### 4. üèÅ –ù–∞—á–∞–ª–æ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞ (checkout)

**–ì–¥–µ:** `CheckoutPage.tsx`  
**–ö–æ–≥–¥–∞:** –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞

```typescript
// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∫–æ—Ä–∑–∏–Ω—ã
useEffect(() => {
  if (cart && cart.items.length > 0) {
    const ecommerceProducts = cartItemsToEcommerce(cart.items, { list: "–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞" })
    trackCheckoutStart(ecommerceProducts, 1)
  }
}, [cart?.id])
```

### 5. üí≥ –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –ø–æ–∫—É–ø–∫–∏ (purchase)

**–ì–¥–µ:** `CheckoutPage.tsx`  
**–ö–æ–≥–¥–∞:** –ü—Ä–∏ —É—Å–ø–µ—à–Ω–æ–º —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞–∫–∞–∑–∞

```typescript
// –ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–∫–∞–∑–∞ —á–µ—Ä–µ–∑ API
const ecommerceProducts = cartItemsToEcommerce(cart.items, { list: "–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞" })
const deliveryCost = deliveryEstimate?.deliveryCost || 0
trackPurchase(order.id.toString(), ecommerceProducts, {
  revenue: cart.totalAmount + deliveryCost,
  shipping: deliveryCost,
  affiliation: "–î–ò–ú–ë–û –ü–∏—Ü—Ü–∞ - –î–æ—Å—Ç–∞–≤–∫–∞ –ø–∏—Ü—Ü—ã"
})
```

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

### –û—Å–Ω–æ–≤–Ω–æ–π —Ö—É–∫ `useYandexMetrika`

```typescript
const YANDEX_METRIKA_ID = import.meta.env.VITE_YANDEX_METRIKA_ID || '103585127'
const { 
  trackProductView,
  trackAddToCart,
  trackRemoveFromCart,
  trackCheckoutStart,
  trackPurchase,
  trackPaymentMethod
} = useYandexMetrika(YANDEX_METRIKA_ID)
```

### –£—Ç–∏–ª–∏—Ç—ã –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö

```typescript
// –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ –≤ —Ñ–æ—Ä–º–∞—Ç ecommerce
export function productToEcommerce(
  product: Product, 
  options?: {
    quantity?: number
    position?: number
    list?: string
    variant?: string
  }
): EcommerceProduct

// –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–∞ –∫–æ—Ä–∑–∏–Ω—ã
export function cartItemToEcommerce(
  cartItem: CartItem,
  options?: {
    position?: number
    list?: string
  }
): EcommerceProduct
```

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ (list)

```typescript
export function getListForTracking(pathname: string): string {
  if (pathname.includes('/menu')) return "–ú–µ–Ω—é"
  if (pathname.includes('/cart')) return "–ö–æ—Ä–∑–∏–Ω–∞"
  if (pathname.includes('/checkout')) return "–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞"
  if (pathname.includes('/product/')) return "–ö–∞—Ä—Ç–æ—á–∫–∞ —Ç–æ–≤–∞—Ä–∞"
  if (pathname === '/') return "–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞"
  return "–ö–∞—Ç–∞–ª–æ–≥ –ø—Ä–æ–¥—É–∫—Ü–∏–∏"
}
```

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

### 1. –û—Ç–∫—Ä—ã—Ç—å —Ç–µ—Å—Ç–æ–≤—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É

```bash
# –û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ
open test-ecommerce.html
```

### 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ –∫–æ–Ω—Å–æ–ª–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞

```javascript
// –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ dataLayer
console.log(window.dataLayer)

// –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é –Ø–Ω–¥–µ–∫—Å –ú–µ—Ç—Ä–∏–∫–∏
console.log(window.ym)
```

### 3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ—Ç–ª–∞–¥—á–∏–∫ –Ø–Ω–¥–µ–∫—Å –ú–µ—Ç—Ä–∏–∫–∏

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ [–Ø–Ω–¥–µ–∫—Å.–ú–µ—Ç—Ä–∏–∫–∞ Debugger](https://chrome.google.com/webstore/detail/yandexmetrica-debugger/gfpbhbahogndgleeokfhjnaolbpapnih)
2. –û—Ç–∫—Ä–æ–π—Ç–µ —Å–∞–π—Ç —Å –≤–∫–ª—é—á–µ–Ω–Ω–æ–π –ú–µ—Ç—Ä–∏–∫–æ–π
3. –í–∫–ª—é—á–∏—Ç–µ –æ—Ç–ª–∞–¥—á–∏–∫ –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–µ–π—Å—Ç–≤–∏—è

### 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

1. –ó–∞–π–¥–∏—Ç–µ –≤ [–Ø–Ω–¥–µ–∫—Å.–ú–µ—Ç—Ä–∏–∫—É](https://metrika.yandex.ru/)
2. –û—Ç–∫—Ä–æ–π—Ç–µ —Ä–∞–∑–¥–µ–ª **–û—Ç—á–µ—Ç—ã** ‚Üí **–≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞—è —Ç–æ—Ä–≥–æ–≤–ª—è**
3. –í—ã–ø–æ–ª–Ω–∏—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–µ–π—Å—Ç–≤–∏—è –Ω–∞ —Å–∞–π—Ç–µ
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö (–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å –¥–æ 30 –º–∏–Ω—É—Ç)

---

## üìä –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤ –Ø–Ω–¥–µ–∫—Å –ú–µ—Ç—Ä–∏–∫–µ

### 1. –í–∫–ª—é—á–µ–Ω–∏–µ —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–π —Ç–æ—Ä–≥–æ–≤–ª–∏

1. –ó–∞–π–¥–∏—Ç–µ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å—á–µ—Ç—á–∏–∫–∞
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª **–¶–µ–ª–∏ –∏ —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞—è —Ç–æ—Ä–≥–æ–≤–ª—è**
3. –í–∫–ª—é—á–∏—Ç–µ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å **–≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞—è —Ç–æ—Ä–≥–æ–≤–ª—è**
4. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ü–µ–ª–µ–π

–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ —Ü–µ–ª–∏ –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:

```javascript
// –£–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ reachGoal
- PRODUCT_VIEW      // –ü—Ä–æ—Å–º–æ—Ç—Ä —Ç–æ–≤–∞—Ä–∞
- ADD_TO_CART       // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –∫–æ—Ä–∑–∏–Ω—É  
- REMOVE_FROM_CART  // –£–¥–∞–ª–µ–Ω–∏–µ –∏–∑ –∫–æ—Ä–∑–∏–Ω—ã
- CHECKOUT_START    // –ù–∞—á–∞–ª–æ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è
- ORDER_COMPLETE    // –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞
- PAYMENT_METHOD_SELECTED // –í—ã–±–æ—Ä —Å–ø–æ—Å–æ–±–∞ –æ–ø–ª–∞—Ç—ã
```

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö

–í –æ—Ç—á–µ—Ç–∞—Ö –Ø–Ω–¥–µ–∫—Å –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

- **–≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞—è —Ç–æ—Ä–≥–æ–≤–ª—è** ‚Üí **–¢–æ–≤–∞—Ä—ã** - —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Ç–æ–≤–∞—Ä–æ–≤
- **–≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞—è —Ç–æ—Ä–≥–æ–≤–ª—è** ‚Üí **–ü–æ–∫—É–ø–∫–∏** - –¥–µ—Ç–∞–ª–∏ –∑–∞–∫–∞–∑–æ–≤
- **–≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞—è —Ç–æ—Ä–≥–æ–≤–ª—è** ‚Üí **–í–æ—Ä–æ–Ω–∫–∞ –ø–æ–∫—É–ø–æ–∫** - –∫–æ–Ω–≤–µ—Ä—Å–∏—è –ø–æ —ç—Ç–∞–ø–∞–º

---

## üöÄ –í–Ω–µ–¥—Ä–µ–Ω–∏–µ –≤ production

### 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
# –í .env —Ñ–∞–π–ª–µ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —É–∫–∞–∑–∞–Ω ID —Å—á–µ—Ç—á–∏–∫–∞
VITE_YANDEX_METRIKA_ID=YOUR_REAL_METRIKA_ID
```

### 2. –£–±—Ä–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã

```bash
# –£–¥–∞–ª–∏—Ç—å –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º
rm test-ecommerce.html
```

### 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

```bash
# –Ø–Ω–¥–µ–∫—Å –ú–µ—Ç—Ä–∏–∫–∞ –æ—Ç–∫–ª—é—á–µ–Ω–∞ –≤ development —Ä–µ–∂–∏–º–µ
# –î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤–∫–ª—é—á–∏—Ç–µ production —Å–±–æ—Ä–∫—É
npm run build
npm run preview
```

---

## üìà –û–∂–∏–¥–∞–µ–º—ã–µ –º–µ—Ç—Ä–∏–∫–∏

### –ö–ª—é—á–µ–≤—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏

1. **–ö–æ–Ω–≤–µ—Ä—Å–∏—è –≤–æ—Ä–æ–Ω–∫–∏:**
   - –ü—Ä–æ—Å–º–æ—Ç—Ä—ã —Ç–æ–≤–∞—Ä–æ–≤ ‚Üí –î–æ–±–∞–≤–ª–µ–Ω–∏—è –≤ –∫–æ—Ä–∑–∏–Ω—É: 15-25%
   - –î–æ–±–∞–≤–ª–µ–Ω–∏—è –≤ –∫–æ—Ä–∑–∏–Ω—É ‚Üí –ù–∞—á–∞–ª–æ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è: 60-80%
   - –ù–∞—á–∞–ª–æ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è ‚Üí –ü–æ–∫—É–ø–∫–∞: 70-90%

2. **–°—Ä–µ–¥–Ω–∏–π —á–µ–∫:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –¥–∞–Ω–Ω—ã—Ö `revenue`

3. **–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã:** –†–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ –∏ –ø–æ–∫—É–ø–æ–∫

4. **–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∫–∞—Ç–∞–ª–æ–≥–∞:** –ö–æ–Ω–≤–µ—Ä—Å–∏—è –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º —Ç–æ–≤–∞—Ä–æ–≤

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **–°–µ–≥–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π** –ø–æ –ø–æ–≤–µ–¥–µ–Ω–∏—é –≤ –∫–æ—Ä–∑–∏–Ω–µ
- **–ê–Ω–∞–ª–∏–∑ –æ—Ç–∫–∞–∑–æ–≤** –Ω–∞ —ç—Ç–∞–ø–∞—Ö –≤–æ—Ä–æ–Ω–∫–∏
- **–ê/–ë —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
- **–ö–æ–≥–æ—Ä—Ç–Ω—ã–π –∞–Ω–∞–ª–∏–∑** –≤–æ–∑–≤—Ä–∞—â–∞—é—â–∏—Ö—Å—è –ø–æ–∫—É–ø–∞—Ç–µ–ª–µ–π

---

## üîç –û—Ç–ª–∞–¥–∫–∞ –∏ —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

1. **–î–∞–Ω–Ω—ã–µ –Ω–µ –ø–æ—Å—Ç—É–ø–∞—é—Ç –≤ –Ø–Ω–¥–µ–∫—Å –ú–µ—Ç—Ä–∏–∫—É**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å ID —Å—á–µ—Ç—á–∏–∫–∞
   - –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ ecommerce –≤–∫–ª—é—á–µ–Ω–∞ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ —Å–∞–π—Ç –Ω–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω –∞–¥–±–ª–æ–∫–µ—Ä–∞–º–∏

2. **–ù–µ–≤–µ—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –æ —Ç–æ–≤–∞—Ä–∞—Ö**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –≤ `ecommerceHelpers.ts`
   - –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ ID —Ç–æ–≤–∞—Ä–æ–≤ —É–Ω–∏–∫–∞–ª—å–Ω—ã –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç API

3. **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –Ω–µ —Ä–µ–Ω–¥–µ—Ä—è—Ç—Å—è –¥–≤–∞–∂–¥—ã
   - –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ useEffect –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

```typescript
// –í–∫–ª—é—á–µ–Ω–æ –≤ development —Ä–µ–∂–∏–º–µ
console.log('üìä Yandex Ecommerce:', ecommerceData)
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ dataLayer –≤ –∫–æ–Ω—Å–æ–ª–∏

```javascript
// –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ —Å–æ–±—ã—Ç–∏—è
window.dataLayer.forEach((event, index) => {
  console.log(`Event ${index}:`, event)
})

// –ü–æ–∫–∞–∑–∞—Ç—å —Ç–æ–ª—å–∫–æ ecommerce —Å–æ–±—ã—Ç–∏—è
window.dataLayer
  .filter(event => event.ecommerce)
  .forEach(event => console.log(event.ecommerce))
```

---

## üìö –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [–û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –Ø–Ω–¥–µ–∫—Å –ú–µ—Ç—Ä–∏–∫–∏](https://yandex.ru/support/metrica/ru/ecommerce/data)
- [Enhanced Ecommerce Developer Guide](https://developers.google.com/analytics/devguides/collection/ga4/ecommerce)
- [–Ø–Ω–¥–µ–∫—Å.–ú–µ—Ç—Ä–∏–∫–∞ Debugger](https://chrome.google.com/webstore/detail/yandexmetrica-debugger/gfpbhbahogndgleeokfhjnaolbpapnih)

---

**–ê–≤—Ç–æ—Ä:** AI Assistant  
**–î–∞—Ç–∞:** 2025-01-27  
**–í–µ—Ä—Å–∏—è:** 1.0  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ production
